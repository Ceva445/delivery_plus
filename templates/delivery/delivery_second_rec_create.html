{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block navigation %}
    <nav class="navigation">
        <a class="btn btn-secondary" role="button" href="{% url 'delivery:home' %}">Do głównej</a>
        <a class="btn btn-outline-secondary" role="button" href="{% url 'delivery:select_receprion' %}">Wróć</a>
        
    </nav>
{% endblock %}

{% block content %}
<form method="post" action="{% url 'delivery:second_rec_del_create' %}" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 35%;">Dostawca: </span>
        <input type="text" style="width: 65%;" name="supplier_company" id="supplier_company_search" autocomplete="off" oninput="searchSupplier()">
        <div id="supplier_suggestions" onclick="selectSupplier(event)">
        </div>
    <input type="hidden" name="selected_supplier_id" id="selected_supplier_id" required>
    </div>
    
    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 35%;">Zamówienie: </span>
        <input type="number" style="width: 65%;" name="order_nr" required required min="10000000" max="99999999">
    </div>

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 35%;">Sklep: </span>
        <input type="number" style="width: 65%;" name="shop" required min="1" max="88">
    </div>

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 35%;" >SSCC: </span>
        <input type="text" style="width: 65%;" name="sscc_barcode" maxlength="20" required>
    </div>


    {% if request.user.is_superuser or request.user.role == 'admin' or request.user.role == 'leader' %}
    <div class="input-group mb-3" type="number", >
        <span class="input-group-text" id="inputGroup-sizing-default">Data: </span>
        <input name="date_recive", id="work_day" type="date" class="form-control" aria-describedby="inputGroup-sizing-default" value="{{data_today}}">
        
    </div>
    {% endif %}
    
    <div class="input-group mb-3" type="number", >
        <select name="reasones" class="form-select" required>
            <option  disabled selected value="" >Wybierz powód</option>
            {% for reasone in reasones %}
                <option value="{{ reasone.name }}">{{ reasone.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="input-group mb-3" type="number", >
        <input name="extra_comment" type="text" class="form-control" placeholder="Co dalej stało się z produktem?">
    </div>
    


        <label for="ean">Products:</label>
        <div id="product-fields">
            <div class="product-field">
                <input type="number" name="ean_0" style="width: 65%;" placeholder="EAN" margin-right: 1px;> 
                <input type="number" name="qty_0" style="width: 33%;" placeholder="QTY" required>
            </div>
        </div>
        <br>
        <button type="button" onclick="addProductField()" style="width: 49%;">+</button>
        <button type="button" onclick="removeLastProductField()" style="width: 49%;">-</button>
        <br>
        <br>

        <input type="hidden" name="recive_location" id="recive_location" value={{ reception }} required>
        <input class="btn btn-secondary" type="submit" value="Submit" style="width: 100%;"> 
</form>

{% if error_message %}
    <div class="alert alert-danger" role="alert">
        {{ error_message }}
    </div>
{% endif %}
    
{% endblock %}
