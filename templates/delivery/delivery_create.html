{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block navigation %}
    <nav class="navigation">
        <a class="btn btn-secondary" role="button" href="{% url 'delivery:home' %}">Do głównej</a>
        <a class="btn btn-outline-secondary" role="button" href="{% url 'delivery:select_receprion' %}">Wróć</a>
        
    </nav>
{% endblock %}

{% block content %}
<form method="post" action="{% url 'delivery:delivery_create' %}" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 25%;">Dostawca: </span>
        <input type="text" style="width: 75%;" name="supplier_company" id="supplier_company_search" autocomplete="off" oninput="searchSupplier()">
        <div id="supplier_suggestions" onclick="selectSupplier(event)">
        </div>
    <input type="hidden" name="selected_supplier_id" id="selected_supplier_id" required>
    </div>
    
    
    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 25%;">Zamówienie: </span>
        <input type="number" style="width: 75%;" name="order_nr" required>
    </div>

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 25%;">Sklep: </span>
        <input type="number" style="width: 75%;" name="shop" required>
    </div>

    <div class="input-group mb-3" type="number">
        <span class="input-group-text" style="width: 25%;" >SSCC: </span>
        <input type="text" style="width: 75%;" name="sscc_barcode" maxlength="20" required>
    </div>
    

    <div class="mb-3" id="imag-fields">
        <input name="images_url_0" class="form-control" type="file" id="formFileMultiple">
        <button type="button" onclick="addImageField()" style="width: 100%;">+</button>
    </div>

    {% if reception == "first" %}
        <input name="comment" type="text" class="form-control" placeholder="Dodaj komentarz" required>
    {% endif %}
    
    {% if reception == "second" %}    
        <span class="input-group-text" >Wybierz komentarz: </span>
        <select name="reasones" class="form-select">
            {% for reasone in reasones %}
                <option value="{{ reasone.id }}">{{ reasone.name }}</option>
            {% endfor %}
        </select>

        <label for="ean">Products:</label>
        <div id="product-fields">
            <div class="product-field">
                <input type="number" name="ean_0" style="width: 70%;" placeholder="EAN" margin-right: 1px;> 
                <input type="number" name="qty_0" style="width: 28%;" placeholder="QTY" required>
            </div>
        </div>

        <button type="button" onclick="addProductField()" style="width: 100%;">+</button>
        <br>
        <br>
    {% endif %}


        <input class="btn btn-secondary" type="submit" value="Submit" style="width: 100%;"> 
</form>


    
{% endblock %}